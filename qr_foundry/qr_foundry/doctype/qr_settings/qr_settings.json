{
  "doctype": "DocType",
  "name": "QR Settings",
  "module": "QR Foundry",
  "issingle": 1,
  "custom": 0,
  "track_changes": 1,
  "field_order": [
    "allowed_domains",
    "default_rate_limit_per_min",
    "require_login",
    "store_images_private",
    "section_rules",
    "rules"
  ],
  "fields": [
    {
      "fieldname": "allowed_domains",
      "label": "Allowed Domains (one per line)",
      "fieldtype": "Small Text",
      "description": "Limit external redirects to these hosts. Leave blank to allow any http(s)."
    },
    {
      "fieldname": "default_rate_limit_per_min",
      "label": "Default Rate Limit / Minute",
      "fieldtype": "Int",
      "description": "Resolver uses this only if a token has no per-minute limit."
    },
    {
      "fieldname": "require_login",
      "label": "Require Login to Resolve",
      "fieldtype": "Check",
      "default": "0",
      "description": "If enabled, /qr?token=... requires a signed-in user."
    },
    {
      "fieldname": "store_images_private",
      "label": "Store QR Images as Private",
      "fieldtype": "Check",
      "default": "1",
      "description": "When enabled, saved PNGs are private files. Prints embed a data-URI, not a URL."
    },
    {
      "fieldname": "section_rules",
      "label": "Enable QR Button on DocTypes",
      "fieldtype": "Section Break"
    },
    {
      "fieldname": "rules",
      "label": "Rules",
      "fieldtype": "Table",
      "options": "QR Settings Rule"
    }
  ],
  "permissions": [
    { "role": "System Manager", "read": 1, "write": 1, "create": 1, "delete": 1, "print": 1, "email": 1, "export": 1, "report": 1, "share": 1 },
    { "role": "QR Manager",     "read": 1, "write": 1 }
  ]
}
